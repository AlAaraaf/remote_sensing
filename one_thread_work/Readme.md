This is the code for existing one thread works for 
